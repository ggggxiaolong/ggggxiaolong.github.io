import{_ as s,o,c as n,U as a}from"./chunks/framework.70292381.js";const d=JSON.parse('{"title":"MotionLayout介绍 part1","description":"","frontmatter":{"title":"MotionLayout介绍 part1","date":"2019-05-23T12:00:00.000Z","categories":["Android"],"tags":["MotionLayout"]},"headers":[],"relativePath":"posts/2019-05-23-MotionLayout介绍_partI.md","filePath":"posts/2019-05-23-MotionLayout介绍_partI.md"}'),l={name:"posts/2019-05-23-MotionLayout介绍_partI.md"},p=a(`<h1 id="motionlayout-介绍-第一章" tabindex="-1">MotionLayout 介绍 (第一章) <a class="header-anchor" href="#motionlayout-介绍-第一章" aria-label="Permalink to &quot;MotionLayout 介绍 (第一章)&quot;">​</a></h1><p><a href="https://medium.com/google-developers/introduction-to-motionlayout-part-i-29208674b10d" target="_blank" rel="noreferrer">原文链接</a></p><p>MotionLayout 是 ConstrainLayout 2.0 库中被引入的一个新类，帮助安卓开发者关联手势和组件动画。接下来的文章将介绍会如何在应用中添加和使用 MotionLayout 。</p><p><strong>第一章</strong>将介绍MotionLayout的基础：</p><ul><li>MotionLayout 是什么？</li><li>将 ConstrainLayout 2.0 和 MotionLayout 添加到项目中</li><li>如何使用 MotionLayout</li><li>ConstraintSets</li><li>MotionScene</li><li><strong>示例1</strong>: 关联已有的布局文件</li><li>处理 OnSwipe</li><li><strong>示例2</strong>: 自包含的 MotionScene</li><li>MotionLayout 属性</li><li>总结</li></ul><p>你可以在这里查看示例的源码 <a href="https://github.com/googlesamples/android-ConstraintLayoutExamples" target="_blank" rel="noreferrer">ConstraintLayout examples github repositor</a></p><h3 id="motionlayout-是什么" tabindex="-1">MotionLayout 是什么？ <a class="header-anchor" href="#motionlayout-是什么" aria-label="Permalink to &quot;MotionLayout 是什么？&quot;">​</a></h3><p>安卓系统框架中已经提供下面几种方法在应用中使用动画：</p><ul><li><a href="https://developer.android.com/guide/topics/graphics/drawable-animation" target="_blank" rel="noreferrer">Animated Vector Drawable</a></li><li><a href="https://developer.android.com/guide/topics/graphics/prop-animation" target="_blank" rel="noreferrer">Property Animation framework</a></li><li><a href="https://developer.android.com/reference/android/animation/LayoutTransition" target="_blank" rel="noreferrer">LayoutTransition animations</a></li><li><a href="https://developer.android.com/training/transitions/" target="_blank" rel="noreferrer">Layout transitions with TransitionManager</a></li><li><a href="https://developer.android.com/reference/android/support/design/widget/CoordinatorLayout" target="_blank" rel="noreferrer">CoordinatorLayout</a></li></ul><p>这一部分将介绍 MotionLayout 与这些动画的不同。</p><p>MotionLayout 就像它的名字一样，首先它是一个布局，可以放置组件。其次它还是 ConstrainLayout 的子类，内置丰富的功能。</p><p>创建 MotionLayout 的目的是用于降低布局过渡动画和复杂的手势处理之间的难度，你可以认为它拥有综合属性动画，TransitionManager, 和 CoordinatorLayout 的功能。</p><blockquote><p>它拥有综合属性动画，TransitionManager, 和 CoordinatorLayout 的功能</p></blockquote><p>使用 MotionLayout 你可以像 <em>TransitionManager</em> 一样通过两个布局文件描述布局的过渡动画，但是可以使用任何属性(不仅仅局限于 layout attribute). 还有它支持可循迹的过渡，就像 CoordinatorLayout ( 可以通过滑动即刻响应过渡动画 ) 。它支持通过滑动和关键帧自定义过渡动画。</p><blockquote><p>MotionLayout 是完全声明式的</p></blockquote><p>MotionLayout 的另外一个关键区别是，它是完全声明式的。只需要 XML 文件就可以描述一个复杂的过渡动画(如果你想通过代码来描述动画，系统提供的属性完全可以满足需求)。</p><blockquote><p>MotionLayout 工具</p></blockquote><p>我们相信这种声明式的规范将简化过渡动画，同时也有助于为 Android Studio 提供更好的图形化工具。(我们现在正在积极的开发这样的工具，它现在还不可用。)</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_--BinUe-6XZPrZhPys6mzA_hli45d.gif" alt="img"></p><p>最后，作为 ConstrainLayout 2.0 的一部分，它最低支持安卓 API 14，99.8%的设备都可以使用。</p><h5 id="限制" tabindex="-1">限制 <a class="header-anchor" href="#限制" aria-label="Permalink to &quot;限制&quot;">​</a></h5><p>不同于 TransitionManager ，MotionLayout 只能用于他的直接子组件。</p><h5 id="何时使用motionlayout" tabindex="-1">何时使用MotionLayout <a class="header-anchor" href="#何时使用motionlayout" aria-label="Permalink to &quot;何时使用MotionLayout&quot;">​</a></h5><p>我们设想到的使用 MotionLayout 的使用场景： 当你需要移动，缩放或者动画 实际的 UI 组件 (button，title bar 等) 来提供与用户的互动时。</p><h3 id="将-constrainlayout-2-0-和-motionlayout-添加到项目中" tabindex="-1">将 ConstrainLayout 2.0 和 MotionLayout 添加到项目中 <a class="header-anchor" href="#将-constrainlayout-2-0-和-motionlayout-添加到项目中" aria-label="Permalink to &quot;将 ConstrainLayout 2.0 和 MotionLayout 添加到项目中&quot;">​</a></h3><p>只需要将下面的代码添加到 Gradle 文件中即可</p><div class="language-groovy"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">dependencies {</span></span>
<span class="line"><span style="color:#A6ACCD;">    implementation </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">com.android.support.constraint:constraint-layout:2.0.0-beta1</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h3 id="如何使用-motionlayout" tabindex="-1">如何使用 MotionLayout <a class="header-anchor" href="#如何使用-motionlayout" aria-label="Permalink to &quot;如何使用 MotionLayout&quot;">​</a></h3><p>MotionLayout 是 ConstrainLayout 的子类，因此你可以把它当作一个普通的布局。 将已经存在的 ConstrainLayout 布局转换成 MotionLayout 布局 只需要将类名从：</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">android.support.constraint.ConstraintLayout</span><span style="color:#89DDFF;"> .../&gt;</span></span></code></pre></div><p>替换成</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">android.support.constraint.motion.MotionLayout</span><span style="color:#89DDFF;"> .../&gt;</span></span></code></pre></div><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_ht1WQDkxsoeINtC2pwSfig_hsi9kb.png" alt="image"></p><p>ConstrainLayout 和 MotionLayout 的主要不同是 MotionLayout 不是必须将实际描述信息包含在 XML 布局文件中。MotionLayout 通常将这些信息保存在一个单独的 XML 文件 ( MotionScene) 中并关联到布局文件， 通过这种方式布局文件只需要包含 View 和它们的属性，无需包含位置信息和动画。</p><h3 id="constraintsets" tabindex="-1">ConstraintSets <a class="header-anchor" href="#constraintsets" aria-label="Permalink to &quot;ConstraintSets&quot;">​</a></h3><p>通常 ConstrainSet 将包含布局文件中的所有的位置信息规则; 你可以使用多个 ConstrainSet， 你可以决定将那些规则应用到布局中，在应用时这些 View 不会被重建，只会修改他们的位置和大小。结合 TransitionManager 使用可以很容易的创建 ConstrainLayout 的动画。</p><p>MotionLayout 实际上也是源于这种思想，并添加了更丰富的功能。</p><h3 id="motionscene" tabindex="-1">MotionScene <a class="header-anchor" href="#motionscene" aria-label="Permalink to &quot;MotionScene&quot;">​</a></h3><p>MotionLayout 的规范保存在一个单独的 MotionScene XML文件中，该文件存储在 res / xml 目录中。</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_CwwhnKdE7CpV_txpQ7pP6Q_zxhgmd.png" alt="img"></p><p>一个 MotionScene 文件可以包含动画所需的所用内容：</p><ul><li>包含的 ConstraintSets</li><li>这些 ConstraintSet 之间的转换(transition)</li><li>关键帧， 事件处理</li></ul><p>例如，你可以将一个 View 从屏幕的一侧拖拽到另一侧：</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_6iOoPkHl13ap6cluzoYKmg_l5wfom.gif" alt="img"></p><h3 id="示例1-关联布局文件" tabindex="-1">示例1： 关联布局文件 <a class="header-anchor" href="#示例1-关联布局文件" aria-label="Permalink to &quot;示例1： 关联布局文件&quot;">​</a></h3><p>你需要使用 ConstrainLayout 创建两个 ConstrainSet 一个是初始位置（组件在屏幕的左面）一个是结束位置（组件在屏幕的右边）</p><p>初始位置：</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_T1iIAXMJcC3O0iY-RkriEg_kzbzbs.png" alt="img"></p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">android.support.constraint.ConstraintLayout</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res/android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/tools</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">View</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@color/colorAccent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_marginStart</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">text</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintBottom_toBottomOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintStart_toStartOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintTop_toTopOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">android.support.constraint.ConstraintLayout</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>结束位置：</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_sYsemssQUnFCzXHlwQuNGA_fw86mb.png" alt="img"></p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">android.support.constraint.ConstraintLayout</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res/android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/tools</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">View</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@color/colorAccent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_marginEnd</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">text</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintBottom_toBottomOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintEnd_toEndOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintTop_toTopOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">android.support.constraint.ConstraintLayout</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>使用这两个布局文件可以初始化两个 ConstrainSet ，并使用他们（如果使用 TransitionManager 会有动画的平滑过渡）。这种方式有一个问题是转化一旦开始就不会结束，你也不能告诉系统将转换挺在某个位置 (你不能通过输入事件控制转换) 。</p><p>MotionLayout 解决了这些问题。你可以使用 MotionLayout 做同样的事，并且复用已存在的布局文件来初始化状态。首先需要为组件创建一个 MotionLayout 文件(<a href="https://gist.github.com/camaelon/cc6192a76baf3569b95ba11b05f7e863#file-motion_01_basic-xml" target="_blank" rel="noreferrer">motion_01_basic.xml</a> )：</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">androidx.constraintlayout.motion.widget.MotionLayout</span><span style="color:#89DDFF;">      </span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res/android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/tools</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/motionLayout</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layoutDescription</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@xml/scene_01</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">showPaths</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">View</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@color/colorAccent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">text</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_editor_absoluteX</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">147dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_editor_absoluteY</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">230dp</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">androidx.constraintlayout.motion.widget.MotionLayout</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>布局文件中引用了一个 MotionScene 文件<code>scene_01</code></p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">MotionScene</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Transition</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">constraintSetStart</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@layout/motion_01_cl_start</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">constraintSetEnd</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@layout/motion_01_cl_end</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">duration</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">OnSwipe</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">touchAnchorId</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">touchAnchorSide</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">right</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">dragDirection</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dragRight</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Transition</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">MotionScene</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p><code>scene_01</code> 设置了默认的转换，设置了开始和结束 ConstrainSet (<code>motion_01_cl_start</code> 和 <code>motion_01_cl_end</code> )，并为转换设置了<code>OnSwipe</code> 处理。</p><h3 id="onswipe-handler" tabindex="-1">OnSwipe handler <a class="header-anchor" href="#onswipe-handler" aria-label="Permalink to &quot;OnSwipe handler&quot;">​</a></h3><p>在<code>scene_01.xml</code>文件中我们在 <code>Transition</code> 中设置了 <code>OnSwipe</code> 处理器。处理器通过匹配用户的输入事件控制转换。</p><p><img src="https://res.cloudinary.com/xiaolong/image/upload/img/1_13hEIVvjhOoiSDRvMkeZ7g_eiivjv.png" alt="img"></p><p>有一些属性你需要了解：</p><p><code>touchAnchorId</code>： 需要跟踪的对象</p><p><code>touchAnchorSide</code>： 跟踪手指的一侧（right / left / top / bottom）</p><p><code>dragDirection</code>： 跟踪手指运动的方向 ( dragRight / dragLeft / dragUp / dragDown 将决定进度值的变化0-1)</p><h3 id="示例2-自包含的-motionscene" tabindex="-1">示例2： 自包含的 MotionScene <a class="header-anchor" href="#示例2-自包含的-motionscene" aria-label="Permalink to &quot;示例2： 自包含的 MotionScene&quot;">​</a></h3><p>示例1展示了如何快速的创建一个 MotionLayout，最终使用了已存在的布局文件。MotionLayout 还支持直接在 MotionScene 文件中定义 ConstraintSet 。这样做有有以下好处：</p><ul><li>一个文件可以包含多个 ConstraintSet</li><li>除了已有的功能外，还可以处理其他的属性和自定义属性</li><li>面向未来：即将到来的 Android Studio MotionEditor 可能只支持自包含 MotionScene 文件</li></ul><h5 id="插值属性" tabindex="-1">插值属性 <a class="header-anchor" href="#插值属性" aria-label="Permalink to &quot;插值属性&quot;">​</a></h5><p>MotionScene 文件中 ConstraintSet 元素可以使用的属性不仅包含常用的布局属性，除了位置和边距下面的属性也可以在 MotionLayout 中使用：</p><blockquote><p><code>alpha</code><code>visibility</code><code>elevation</code><code>rotation</code>, <code>rotation[X</code>/<code>Y]</code><code>translation[X</code>/<code>Y</code>/<code>Z]</code><code>scaleX</code>/<code>Y</code></p></blockquote><p>让我们为示例1重新创建一个新的自包含的 MotionScene 文件。 MotionLayout 文件除了引用了新的 <code>scene_02.xml</code> 和实例1中没有区别:</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">android.support.constraint.motion.MotionLayout</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res/android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">tools</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/tools</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/motionLayout</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">app</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layoutDescription</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@xml/scene_02</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">match_parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">View</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">background</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@color/colorAccent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">text</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Button</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">android.support.constraint.motion.MotionLayout</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>MotionScene 文件中有明显的区别， <code>Transition</code> 的设置相同，但是我们把 <code>Start</code> 和<code>End</code>直接定义在了 XML 文件中。 和普通布局文件相比主要的区别是我们没有指定具体的组件，而是把限定属性写在了<code>Constraint</code>元素中。</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">MotionScene</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res/android</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://schemas.android.com/apk/res-auto</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Transition</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">constraintSetStart</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/start</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">constraintSetEnd</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/end</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">duration</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">OnSwipe</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">touchAnchorId</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">touchAnchorSide</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">right</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">dragDirection</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dragRight</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Transition</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">ConstraintSet</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Constraint</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_marginStart</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintBottom_toBottomOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintStart_toStartOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintTop_toTopOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">ConstraintSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">ConstraintSet</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/end</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Constraint</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@+id/button</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_width</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_height</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">64dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">android</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_marginEnd</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">8dp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintBottom_toBottomOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintEnd_toEndOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#C792EA;">motion</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">layout_constraintTop_toTopOf</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">parent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">ConstraintSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">MotionScene</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h4 id="constraintset" tabindex="-1">ConstraintSet <a class="header-anchor" href="#constraintset" aria-label="Permalink to &quot;ConstraintSet&quot;">​</a></h4><p>只需要将了解 ConstrainSet 是如何工作的，新的属性将替换到关联的组件上。 只需将需要替换的属性全部包含到<code>Constraint</code> 中。通常这会清除组件上的所用属性并将新的属性赋值到组件上。</p><h3 id="motionlayout-的属性" tabindex="-1">MotionLayout 的属性 <a class="header-anchor" href="#motionlayout-的属性" aria-label="Permalink to &quot;MotionLayout 的属性&quot;">​</a></h3><p>在开发中你可能会用到 MotionLayout 的下列属性：</p><blockquote><p><strong>app:layoutDescription=”reference”</strong> 指定 MotionScene XML 文件</p><p><strong>app:applyMotionScene=”boolean”</strong> 是否应用 MotionScene <em>[default=true]</em></p><p><strong>app:showPaths=”boolean”</strong> 是否显示路径 <em>[default=false].</em> 记得在发布版本中关闭</p><p><strong>app:progress=”float”</strong> 指定转换的进度 [0-1]</p><p><strong>app:currentState=”reference”</strong> 指定一个 ConstraintSet</p></blockquote><h3 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h3><p>第一篇文章包含了 MotionLayout 的基础功能， 你可以在这里查看源码<a href="https://github.com/googlesamples/android-ConstraintLayoutExamples" target="_blank" rel="noreferrer">ConstraintLayout examples github repository</a></p><p>接下来的文章中我们将包含更多的讲解：</p><ul><li>自定义属性, 图片变换, 关键帧 (<a href="https://medium.com/p/a31acc084f59" target="_blank" rel="noreferrer"><strong>part II</strong></a>)</li><li>在现有的布局中使用 MotionLayout (CoordinatorLayout, DrawerLayout, ViewPager) (<a href="https://medium.com/p/47cd64d51a5" target="_blank" rel="noreferrer"><strong>part III</strong></a>)</li><li>关于关键帧的所有! (<a href="https://medium.com/@camaelon/defining-motion-paths-in-motionlayout-6095b874d37" target="_blank" rel="noreferrer"><strong>part IV</strong></a>)</li><li>MotionLayout 作为根布局</li><li>嵌套 MotionLayout &amp; 其他的组件</li><li>MotionLayout 和 fragments</li></ul>`,84),t=[p];function e(r,c,D,F,y,i){return o(),n("div",null,t)}const C=s(l,[["render",e]]);export{d as __pageData,C as default};
