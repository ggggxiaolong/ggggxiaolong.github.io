---
title: Dartå’ŒJavaçš„åŒºåˆ«
date: 2019-03-19 12:00:00
categories:
 - Flutter
tags:
 - Dart
---

>  _Dart 2.2.1

## é¦–å…ˆDartç½‘ç«™çš„é‡è¦çš„æ¦‚å¿µåº”è¯¥çœ‹ä¸€ä¸‹:
[åœ¨å­¦ä¹  Dart çš„æ—¶å€™ï¼Œè¯·ç‰¢è®°ä¸‹é¢ä¸€äº›äº‹å®å’Œæ¦‚å¿µ](http://dart.goodev.org/guides/language/language-tour#important-concepts%E9%87%8D%E8%A6%81%E7%9A%84%E6%A6%82%E5%BF%B5)ï¼š
*   æ‰€æœ‰èƒ½å¤Ÿä½¿ç”¨å˜é‡å¼•ç”¨çš„éƒ½æ˜¯*å¯¹è±¡*ï¼Œ æ¯ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸€ä¸ª*ç±»*çš„å®ä¾‹ã€‚åœ¨ Dart ä¸­ ç”šè‡³è¿ æ•°å­—ã€æ–¹æ³•å’Œ `null` éƒ½æ˜¯å¯¹è±¡ã€‚æ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿äº [Object](https://api.dartlang.org/stable/dart-core/Object-class.html) ç±»ã€‚
*   ä½¿ç”¨é™æ€ç±»å‹(ä¾‹å¦‚å‰é¢ç¤ºä¾‹ä¸­çš„ `num` ) å¯ä»¥æ›´æ¸…æ™°çš„è¡¨æ˜ä½ çš„æ„å›¾ï¼Œå¹¶ä¸”å¯ä»¥è®©é™æ€åˆ†æå·¥å…·æ¥åˆ†æä½ çš„ä»£ç ï¼Œ ä½†è¿™å¹¶ä¸æ˜¯ç‰µåˆ¶æ€§çš„ã€‚ï¼ˆåœ¨è°ƒè¯•ä»£ç çš„æ—¶å€™ä½ å¯èƒ½æ³¨æ„åˆ° æ²¡æœ‰æŒ‡å®šç±»å‹çš„å˜é‡çš„ç±»å‹ä¸º `dynamic`ã€‚ï¼‰
*   Dart åœ¨è¿è¡Œä¹‹å‰ä¼šå…ˆè§£æä½ çš„ä»£ç ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ ç±»å‹æˆ–è€…ç¼–è¯‘æ—¶å¸¸é‡æ¥å¸®åŠ© Dart å»æ•è·å¼‚å¸¸ä»¥åŠ è®©ä»£ç è¿è¡Œçš„æ›´é«˜æ•ˆã€‚
*   Dart æ”¯æŒé¡¶çº§æ–¹æ³• (ä¾‹å¦‚ `main()`)ï¼ŒåŒæ—¶è¿˜æ”¯æŒåœ¨ç±»ä¸­å®šä¹‰å‡½æ•°ã€‚ ï¼ˆé™æ€å‡½æ•°å’Œå®ä¾‹å‡½æ•°ï¼‰ã€‚ ä½ è¿˜å¯ä»¥åœ¨æ–¹æ³•ä¸­å®šä¹‰æ–¹æ³• ï¼ˆåµŒå¥—æ–¹æ³•æˆ–è€…å±€éƒ¨æ–¹æ³•ï¼‰ã€‚
*   åŒæ ·ï¼ŒDart è¿˜æ”¯æŒé¡¶çº§å˜é‡ï¼Œä»¥åŠ åœ¨ç±»ä¸­å®šä¹‰å˜é‡ï¼ˆé™æ€å˜é‡å’Œå®ä¾‹å˜é‡ï¼‰ã€‚ å®ä¾‹å˜é‡æœ‰æ—¶å€™è¢«ç§°ä¹‹ä¸ºåŸŸï¼ˆFieldsï¼‰æˆ–è€…å±æ€§ï¼ˆPropertiesï¼‰ã€‚
*   å’Œ Java ä¸åŒçš„æ˜¯ï¼ŒDart æ²¡æœ‰ `public`ã€ `protected`ã€ å’Œ `private` å…³é”®å­—ã€‚å¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥ (_) å¼€å¤´ï¼Œåˆ™è¯¥æ ‡è¯†ç¬¦ åœ¨åº“å†…æ˜¯ç§æœ‰çš„ã€‚è¯¦æƒ…è¯·å‚è€ƒï¼š [åº“å’Œå¯è§æ€§](http://dart.goodev.org/guides/language/language-tour#libraries-and-visibility)ã€‚
*   *æ ‡è¯†ç¬¦*å¯ä»¥ä»¥å­—æ¯æˆ–è€… _ ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢å¯ä»¥æ˜¯ å…¶ä»–å­—ç¬¦å’Œæ•°å­—çš„ç»„åˆã€‚
*   æœ‰æ—¶å€™ *è¡¨è¾¾å¼ expression* å’Œ *è¯­å¥ statement* æ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µæˆ‘ä»¬ä¼šåˆ†åˆ«æŒ‡æ˜æ¯ç§æƒ…å†µã€‚
*   Dart å·¥å…·å¯ä»¥æŒ‡å‡ºä¸¤ç§é—®é¢˜ï¼šè­¦å‘Šå’Œé”™è¯¯ã€‚ è­¦å‘Šåªæ˜¯è¯´ä½ çš„ä»£ç å¯èƒ½æœ‰é—®é¢˜ï¼Œ ä½†æ˜¯å¹¶ä¸ä¼šé˜»æ­¢ä½ çš„ä»£ç æ‰§è¡Œã€‚ é”™è¯¯å¯ä»¥æ˜¯ç¼–è¯‘æ—¶é”™è¯¯ä¹Ÿå¯ä»¥æ˜¯è¿è¡Œæ—¶é”™è¯¯ã€‚é‡åˆ°ç¼–è¯‘æ—¶é”™è¯¯æ—¶ï¼Œä»£ç å°† æ— æ³•æ‰§è¡Œï¼›è¿è¡Œæ—¶é”™è¯¯å°†ä¼šåœ¨è¿è¡Œä»£ç çš„æ—¶å€™å¯¼è‡´ä¸€ä¸ª [å¼‚å¸¸](http://dart.goodev.org/guides/language/language-tour#exceptions)ã€‚

### å˜é‡
1. å¯ä»¥ä½¿ç”¨ var å£°æ˜å˜é‡( java 10ä¹Ÿå¯ä»¥ ) `var a = 10;` 
2. å¦å¤–å¯¹äºåŠ¨æ€ç±»å‹ Dart è¿˜æœ‰`dynamic` å…³é”®å­—
3. Dart æ‰€æœ‰å˜é‡å¦‚æœæœªåˆå§‹åŒ–éƒ½ä¸º `null` ,ä¸åƒ java `int` çš„é»˜è®¤å€¼æ˜¯ 0, `boolean` çš„é»˜è®¤å€¼æ˜¯ false
4. `final` è¡¨ç¤ºä¸å¯å˜ï¼Œ`const` è¡¨ç¤ºå¸¸é‡ï¼Œ`static` è¡¨ç¤ºçš„æ„ä¹‰ç›¸åŒéƒ½æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡ç±»åçš„æ–¹å¼ä½¿ç”¨æ–¹æ³•å’Œå±æ€§

### å†…å»ºç±»å‹
1. æ²¡æœ‰`float`ç±»å‹ï¼Œ`int`å’Œ`double`éƒ½æ˜¯`num`çš„å­ç±»
2. `String` å­—ç¬¦ä¸²å†…éƒ¨å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ `${}`ï¼Œï¼ˆå’Œ`kotlin`çš„ä½¿ç”¨æ–¹å¼ä¸€è‡´ï¼‰,ä½¿ç”¨å•å¼•å·å’ŒåŒå¼•å·åŒ…å›´ï¼Œä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–åŒå¼•å·åŒ…å›´çš„å­—ç¬¦å¯ä»¥æ¢è¡Œï¼Œæ”¯æŒemojiè¡¨æƒ…

```dart
var s = 'string interpolation';
var s1 = 'Single quotes work well for string literals.';
var s2 = "Double quotes work just as well.";
var s4 = "That deserves all caps. ${s.toUpperCase()} is very handy!";
var s5 = '''
You can create
multi-line strings like this one.
''';
var s6 = """This is also a
multi-line string.""";
var clapping = '\u{1f44f}'; //ğŸ˜†
```

3. æ²¡æœ‰æ•°ç»„åªæœ‰åˆ—è¡¨ï¼ŒList, Set, Map ä¸æ˜¯æŠ½è±¡æ¥å£ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”æ”¯æŒæ³›å½¢
```dart
var list = [1, 2, 3]; // åˆ—è¡¨
var halogens = {'fluorine', 'chlorine', 'bromine', 'iodine', 'astatine'}; // Set
var gifts = {
  // Key:    Value
  'first': 'partridge',
  'second': 'turtledoves',
  'fifth': 'golden rings'
}; // Map
```

### æ–¹æ³•
1. æ”¯æŒé¡¶çº§æ–¹æ³•ï¼Œæ–¹æ³•ä¹Ÿæ˜¯å¯¹è±¡ï¼Œ æ”¯æŒ `lambda` è¡¨è¾¾å¼çš„å†™æ³•
2. å¦‚æœæ–¹æ³•çš„å‚æ•°æ˜¯è§£æ„å‡ºæ¥çš„å¯ä»¥é€šè¿‡ `@required` æ³¨è§£æ ‡æ³¨ä¸ºå¿…å¡« `const Scrollbar({Key key, @required Widget child})`
3. æ”¯æŒå¯é€‰å‚æ•°ï¼Œå¯é€‰å‚æ•°å†™åœ¨æœ€åå¹¶ä¸”ä½¿ç”¨`[]`åŒ…å›´ `String say(String from, String msg, [String device])`
4. æ”¯æŒé»˜è®¤å‚æ•° `void enableFlags({bool bold = false, bool hidden = false}) {...}`
5. æ”¯æŒåŒ¿åæ–¹æ³•`ï¼ˆå‚æ•°ï¼‰{æ–¹æ³•ä½“}`

```dart
var list = ['apples', 'bananas', 'oranges'];
list.forEach((item) {
  print('${list.indexOf(item)}: $item');
});
```

6. æ”¯æŒé—­åŒ…

```dart
Function makeAdder(num addBy) {
  return (num i) => addBy + i;
}

void main() {
  // Create a function that adds 2.
  var add2 = makeAdder(2);

  // Create a function that adds 4.
  var add4 = makeAdder(4);

  assert(add2(3) == 5);
  assert(add4(3) == 7);
}
```

### æ“ä½œç¬¦
1. `as , is, is!` :`as` ç±»ä¼¼ä¸å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œ `is` ç±»ä¼¼ `instanceof`
2. ç©ºæ›¿æ¢`??`ï¼š `String playerName(String name) => name ?? 'Guest';` ç­‰ä»·äº`String playerName(String name) => name  != null ? name : 'Guest';`
3. çº§è”ç¬¦å· (..) å¯ä»¥ä»£æ›¿æ„å»ºè€…æ¨¡å¼
```dart
var button = querySelector('#confirm');
button.text = 'Confirm';
button.classes.add('important');
button.onClick.listen((e) => window.alert('Confirmed!'));
// ä½¿ç”¨çº§è”æ“ä½œ
querySelector('#confirm') // Get an object.
  ..text = 'Confirm' // Use its members.
  ..classes.add('important')
  ..onClick.listen((e) => window.alert('Confirmed!'));
```
4. `?.`æ“ä½œç¬¦å½“å¯¹è±¡ä¸ä¸ºç©ºæ—¶è°ƒç”¨åé¢çš„å±æ€§æˆ–æ–¹æ³•ï¼š `foo?.a` ç±»ä¼¼äº`if( foo != null) f.a;`

### å¼‚å¸¸
1. Dartçš„å¼‚å¸¸æ˜¯ä¸ç”¨å¿…é¡»æ•è·çš„
2. `try {} catch`æœ‰ç‚¹ä¸ä¸€æ ·

```dart
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // åªæ•è· OutOfLlamasException
  buyMoreLlamas();
} on Exception catch (e) {
  // ä¸Šé¢ä¸èƒ½æ•è·çš„ä¸”æ˜¯Exceptionçš„å­ç±»
  print('Unknown exception: $e');
} catch (e,s) {
  // å…¶ä½™çš„æ‰€æœ‰å¼‚å¸¸ï¼Œs ==ã€‹ stack trace
  print('Something really unknown: $e');
 rethrow; //ä¸å¤„ç†ï¼Œç›´æ¥æŠ›å‡ºå»
}
```

### ç±»
1. åˆ›å»ºå¯¹è±¡å¯ä»¥ä¸ä½¿ç”¨`new`å…³é”®å­—
2. å¯ä»¥ç»™æ„é€ æ–¹æ³•å‘½å

```dart
class Point {
  num x, y;

  Point(this.x, this.y);

  // Named constructor
  Point.origin() {
    x = 0;
    y = 0;
  }
}
```

3. è°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼ˆ`:`ï¼‰

```dart
class Person {
  String firstName;

  Person.fromJson(Map data) {
    print('in Person');
  }
}

class Employee extends Person {
  // Person does not have a default constructor;
  // you must call super.fromJson(data).
  Employee.fromJson(Map data) : super.fromJson(data) {
    print('in Employee');
  }
}
```

4. åœ¨æ„é€ æ–¹æ³•çš„æ–¹æ³•ä½“è°ƒç”¨ä¹‹å‰åˆå§‹åŒ–å±æ€§

```dart
import 'dart:math';

class Point {
  final num x;
  final num y;
  final num distanceFromOrigin;

  Point(x, y)
      : x = x,
        y = y,
        distanceFromOrigin = sqrt(x * x + y * y);
}
```

5. å¸¸é‡æ„é€ æ–¹æ³•ï¼Œåœ¨æ„é€ æ–¹æ³•ä¹‹å‰ä½¿ç”¨`const`ä¿®é¥°ï¼Œå±æ€§å¿…éœ€æ˜¯`final`æˆ–è€…`const`çš„

```dart
class ImmutablePoint {
  static final ImmutablePoint origin =
      const ImmutablePoint(0, 0);

  final num x, y;

  const ImmutablePoint(this.x, this.y);
}
const ca = ImmutablePoint(1,1); // const ä¿®é¥°çš„å˜é‡ å¿…é¡»æ˜¯constçš„æ„é€ æ–¹æ³•
var a = const ImmutablePoint(1, 1);
var b = const ImmutablePoint(1, 1);
assert(identical(a, b)); // true
```

6.  `factory` ä¿®é¥°çš„æ„é€ æ–¹æ³•ä¸ºå·¥å‚æ–¹æ³•

```dart
class Logger {
  final String name;
  bool mute = false;

  // _cache is library-private, thanks to
  // the _ in front of its name.
  static final Map<String, Logger> _cache =
      <String, Logger>{};

  factory Logger(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name];
    } else {
      final logger = Logger._internal(name);
      _cache[name] = logger;
      return logger;
    }
  }

  Logger._internal(this.name);

  void log(String msg) {
    if (!mute) print(msg);
  }
}
```

6. `runtimeType` å…³é”®å­— è·å–å˜é‡è¿è¡Œæ—¶çš„ç±»å‹ `print('The type of a is ${a.runtimeType}');` Dart çš„æ³›å½¢æ˜¯ä¸æ“¦é™¤çš„
7. `getter` å’Œ `setter`: é€šè¿‡è¿™ä¸¤ä¸ªå…³é”®å­—å¯ä»¥è‡ªå®šä¹‰å±æ€§çš„å€¼

```dart
class Rectangle {
  num left, top, width, height;

  Rectangle(this.left, this.top, this.width, this.height);

  // Define two calculated properties: right and bottom.
  num get right => left + width;
  set right(num value) => left = value - width;
  num get bottom => top + height;
  set bottom(num value) => top = value - height;
}
```

8. æ²¡æœ‰`interfaces`å…³é”®å­—,æ¯ä¸ªç±»éƒ½æ˜¯ä¸€ä¸ªæ¥å£
9. æ”¯æŒæ“ä½œç¬¦é‡è½½
![æ“ä½œç¬¦](https://upload-images.jianshu.io/upload_images/1419533-6aa2c984bb14f4fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
10. æ”¯æŒé‡å†™`noSuchMethod()`æ–¹æ³•,å½“å¯¹è±¡è°ƒç”¨ä¸å­˜åœ¨çš„å±æ€§æˆ–æ–¹æ³•æ—¶è¯¥æ–¹æ³•ä¼šè¢«è°ƒç”¨
11. æ”¯æŒæ··å…¥`mixin`, æä¾›`by, mixin, mixin ..on` å…³é”®å­—

### æ³›å½¢
1. Java è¿è¡Œæ—¶ä¼šæ“¦é™¤æ³›å½¢,Dart ä¸ä¼š

```dart
var names = List<String>();
names.addAll(['Seth', 'Kathy', 'Lars']);
print(names is List<String>); // true
```

### åº“å’Œå¯è§æ€§
1. Dart ä½¿ç”¨ URI æ¥ç¡®å®šä¸€ä¸ªåº“, å¯ä»¥ç»™åº“æ·»åŠ å‰ç¼€(ä½¿ç”¨ `as` å…³é”®è¯)

```dart
import 'package:lib1/lib1.dart';
import 'package:lib2/lib2.dart' as lib2;

// Uses Element from lib1.
Element element1 = Element();

// Uses Element from lib2.
lib2.Element element2 = lib2.Element();
```

2. æ”¯æŒå¯¼å…¥éƒ¨åˆ†åº“(`show`),æˆ–è€…éšè—éƒ¨åˆ†åº“(`hide`)

```dart
// Import only foo.
import 'package:lib1/lib1.dart' show foo;

// Import all names EXCEPT foo.
import 'package:lib2/lib2.dart' hide foo;
```

3. æ”¯æŒæ‡’åŠ è½½ `deferred as`

```dart
import 'package:greetings/hello.dart' deferred as hello;
Future greet() async {
  await hello.loadLibrary();
  hello.printGreeting();
}
```

### å¼‚æ­¥
1. `async, await` å…³é”®å­—, å£°æ˜è€—æ—¶æ“ä½œ,è¿”å›å€¼å¿…é¡»æ˜¯ `Future` æ–¹æ³•ååç”¨ `async` æ ‡æ³¨, è°ƒç”¨è€—æ—¶æ“ä½œæ—¶éœ€è¦ä½¿ç”¨ `await` å…³é”®å­—,å¹¶ä¸”åœ¨ `async`æ ‡æ³¨çš„æ–¹æ³•ä¸­

```dart
Future<String> lookUpVersion() async => '1.0.0';

Future checkVersion() async {
  var version = await lookUpVersion();
  // Do something with version
}
```

2. `Stream ` å…³é”®å­—ä½¿ç”¨ `await for ` æˆ–è€… `listen`æ–¹æ³•

```dart
Future main() async {
  // ...
  await for (var request in requestServer) {
    handleRequest(request);
  }
  // ...
}
```

### ç”Ÿæˆå™¨
1. æ–¹æ³•ä½“ä½¿ç”¨ `sync*` æ ‡æ³¨, è¿”å›å€¼å‰æ·»åŠ `yeild`, è¿”å›å€¼  **[Iterable](https://api.dartlang.org/stable/dart-core/Iterable-class.html)** è¡¨ç¤ºåŒæ­¥,  **[Stream](https://api.dartlang.org/stable/dart-async/Stream-class.html)** è¡¨ç¤ºå¼‚æ­¥, å¦‚æœè¿”å›å€¼ä¸ºé€’å½’ä½¿ç”¨ `yeild *` æ¥æé«˜æ€§èƒ½

```dart
// åŒæ­¥
Iterable<int> naturalsTo(int n) sync* {
  int k = 0;
  while (k < n) yield k++;
}
// å¼‚æ­¥
Stream<int> asynchronousNaturalsTo(int n) async* {
  int k = 0;
  while (k < n) yield k++;
}
// è¿”å›å€¼ä¸ºé€’å½’
Iterable<int> naturalsDownFrom(int n) sync* {
  if (n > 0) {
    yield n;
    yield* naturalsDownFrom(n - 1);
  }
}
```

### å¯è¿è¡Œçš„ç±»
1. å¦‚æœç±»ä¸­å®ç°äº† `call` æ–¹æ³•, é‚£ä¹ˆè¿™ä¸ªç±»å°±æ˜¯å¯æ‰§è¡Œçš„

```dart
class WannabeFunction {
  call(String a, String b, String c) => '$a $b $c!';
}

main() {
  var wf = new WannabeFunction();
  var out = wf("Hi","there,","gang");
  print('$out');
}
```

### Typedefs
1. ä½¿ç”¨ `typedef` å…³é”®å­— æ ‡æ³¨æ–¹æ³•ç­¾å,å¯ä»¥é¿å…æ–¹æ³•ç­¾åçš„ä¸¢å¤±

```dart
typedef Compare = int Function(Object a, Object b);

class SortedCollection {
  Compare compare;

  SortedCollection(this.compare);
}

// Initial, broken implementation.
int sort(Object a, Object b) => 0;

void main() {
  SortedCollection coll = SortedCollection(sort);
  assert(coll.compare is Function);
  assert(coll.compare is Compare);
}
```

### æ³¨è§£
1. Dart ä½¿ç”¨ç±»æ¥å£°æ˜æ³¨è§£, Java ä½¿ç”¨ `@interface`; å¦å¤– Dart è²Œä¼¼æ²¡æœ‰åœ°æ–¹å£°æ˜æ³¨è§£çš„ä½¿ç”¨èŒƒå›´

### æ³¨é‡Š
1. Dart å¯ä»¥ä½¿ç”¨ `///, /**` ç¼–å†™æ–‡æ¡£æ³¨é‡Š