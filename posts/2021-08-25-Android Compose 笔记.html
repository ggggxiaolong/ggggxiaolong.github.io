<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>Android Compose 笔记 | 谈小龙</title>
    <meta name="description" content="vitepress,blog,blog-theme">
    <link rel="preload stylesheet" href="/assets/style.d8981f7d.css" as="style">
    
    <script type="module" src="/assets/app.96199412.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.70292381.js">
    <link rel="modulepreload" href="/assets/chunks/theme.81fe764a.js">
    <link rel="modulepreload" href="/assets/chunks/Page.fc7628b9.js">
    <link rel="modulepreload" href="/assets/posts_2021-08-25-Android Compose 笔记.md.95a9e339.lean.js">
    <link rel="icon" href="/icons/favicon.ico">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><!--[--><div class="Layout" data-v-ffdc1df7><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9c8615dd></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9c8615dd> Skip to content </a><!--]--><!----><header class="VPNav" data-v-ffdc1df7 data-v-5bdc5df3><div class="VPNavBar" data-v-5bdc5df3 data-v-4077a65e><div class="container" data-v-4077a65e><div class="title" data-v-4077a65e><div class="VPNavBarTitle" data-v-4077a65e data-v-6d57964e><a class="title" href="/" data-v-6d57964e><!--[--><!--]--><!----><!--[-->谈小龙<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-4077a65e><div class="curtain" data-v-4077a65e></div><div class="content-body" data-v-4077a65e><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-4077a65e><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-4077a65e data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-f732b5d0 data-v-7f10a92a><!--[-->Home<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/archives.html" tabindex="0" data-v-f732b5d0 data-v-7f10a92a><!--[-->Archives<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/tags.html" tabindex="0" data-v-f732b5d0 data-v-7f10a92a><!--[-->Tags<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/about.html" tabindex="0" data-v-f732b5d0 data-v-7f10a92a><!--[-->About<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/pages/demo.html" tabindex="0" data-v-f732b5d0 data-v-7f10a92a><!--[-->Demo<!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-4077a65e data-v-5e9f0637><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-5e9f0637 data-v-a99ed743 data-v-92d8f6fb><span class="check" data-v-92d8f6fb><span class="icon" data-v-92d8f6fb><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a99ed743><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a99ed743><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-4077a65e data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ggggxiaolong" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-16cf740a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-4077a65e data-v-c8c2ae4b data-v-6afe904b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6afe904b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6afe904b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6afe904b><div class="VPMenu" data-v-6afe904b data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-c8c2ae4b><div class="item appearance" data-v-c8c2ae4b><p class="label" data-v-c8c2ae4b>Appearance</p><div class="appearance-action" data-v-c8c2ae4b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-c8c2ae4b data-v-a99ed743 data-v-92d8f6fb><span class="check" data-v-92d8f6fb><span class="icon" data-v-92d8f6fb><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-a99ed743><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-a99ed743><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-c8c2ae4b><div class="item social-links" data-v-c8c2ae4b><div class="VPSocialLinks social-links-list" data-v-c8c2ae4b data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ggggxiaolong" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-16cf740a><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-4077a65e data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-ffdc1df7 data-v-693d654a><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-693d654a data-v-bd10e8af><button data-v-bd10e8af>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-ffdc1df7 data-v-f0629f57><div class="VPDoc has-aside" data-v-f0629f57 data-v-a3c25e27><!--[--><!--]--><div class="container" data-v-a3c25e27><div class="aside" data-v-a3c25e27><div class="aside-curtain" data-v-a3c25e27></div><div class="aside-container" data-v-a3c25e27><div class="aside-content" data-v-a3c25e27><div class="VPDocAside" data-v-a3c25e27 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cb998dce data-v-c834746b><div class="content" data-v-c834746b><div class="outline-marker" data-v-c834746b></div><div class="outline-title" data-v-c834746b>文章摘要</div><nav aria-labelledby="doc-outline-aria-label" data-v-c834746b><span class="visually-hidden" id="doc-outline-aria-label" data-v-c834746b> Table of Contents for current page </span><ul class="root" data-v-c834746b data-v-89c8d7c6><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-a3c25e27><div class="content-container" data-v-a3c25e27><!--[--><!--]--><!----><main class="main" data-v-a3c25e27><div style="position:relative;" class="vp-doc _posts_2021-08-25-Android%20Compose%20%E7%AC%94%E8%AE%B0" data-v-a3c25e27><div><h1 id="android-compose-笔记" tabindex="-1">Android Compose 笔记 <a class="header-anchor" href="#android-compose-笔记" aria-label="Permalink to &quot;Android Compose 笔记&quot;">​</a></h1><ol><li><p>Compose 是一个方法，没有返回值，需要使用 <code>@composable</code> 注解标记. 在 Compose 进行界面的描述。Compose 可能会频繁重复执行，需要保证其轻量，不能进行耗时的操作如读取文件. 界面重绘制时系统会尽量保证只绘制有影响的的组件.</p></li><li><p>Compose 组件不会自动更新状态，对比：传统组件 <code>EditText</code> 会自己更新用户输入的内容；可以使用 <code>remember</code> 方法在 Compose 中缓存一个值，并且重绘时返回该值 (不同于变量，因为 Compose 是方法，当 Compose 再次被调用的时候变量会被重新初始化)，<code>remember</code> 不会在配置改变的时候保留 (屏幕旋转，界面被回收重建)，如果需要保留使用 <code>rememberSaveable</code></p></li><li><p>在需要多个相同 Compose 组件时使用 <code>key</code> 来避免数据变化引起的不必要的重组，</p></li></ol><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MoviesScreen</span><span style="color:#A6ACCD;">(movies: </span><span style="color:#FFCB6B;">List</span><span style="color:#A6ACCD;">&lt;</span><span style="color:#FFCB6B;">Movie</span><span style="color:#A6ACCD;">&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> (movie </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> movies) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">key</span><span style="color:#A6ACCD;">(movie.id) { </span><span style="color:#676E95;font-style:italic;">// Unique ID for this movie</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">MovieOverview</span><span style="color:#A6ACCD;">(movie)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p><img src="https://developer.android.google.cn/images/jetpack/compose/lifecycle-newelement-top-keys.png?hl=zh-cn" alt="key"></p><ol start="4"><li><p>通过 <code>@Stable</code> 注解标注稳定的 Compose 组件，可以略过重组检测</p></li><li><p>在 Compose 中启动协程 <code>LaunchedEffect(key)</code> ， 在组和之外(点击事件)使用协程通过 <code>rememberCoroutineScope</code> 获取 Scope 感知 Compose 声明周期，<code>LaunchedEffect</code> 的 <code>key</code> 发生改变或方法体内的引用发生改变时会导致协程重启， 可以通过 <code>rememberUpdatedState</code> 来创建一个引用，在 “效应” 中使用时 “引用值改变” 不会导致协程重启。</p></li><li><p><strong>效应</strong> 包含 <code>remember*</code>, <code>*Effect</code></p></li><li><p>在 Compose 结束的时候清理注册 <code>DisposableEffect</code></p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">BackHandler</span><span style="color:#A6ACCD;">(backDispatcher: </span><span style="color:#FFCB6B;">OnBackPressedDispatcher</span><span style="color:#A6ACCD;">, onBack: () </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt; Unit) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// 阻止因 onBack 改变而导致的 remember 改变</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> currentOnBack </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberUpdatedState</span><span style="color:#A6ACCD;">(onBack)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// Remember in Composition a back callback that calls the `onBack` lambda</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> backCallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// Always intercept back events. See the SideEffect for</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// a more complete version</span></span>
<span class="line"><span style="color:#A6ACCD;">        object : </span><span style="color:#FFCB6B;">OnBackPressedCallback</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">true</span><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">override</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">handleOnBackPressed</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">currentOnBack</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// If `backDispatcher` changes, dispose and reset the effect</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">DisposableEffect</span><span style="color:#A6ACCD;">(backDispatcher) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// Add callback to the backDispatcher</span></span>
<span class="line"><span style="color:#A6ACCD;">        backDispatcher.</span><span style="color:#82AAFF;">addCallback</span><span style="color:#A6ACCD;">(backCallback)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// When the effect leaves the Composition, remove the callback</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">onDispose</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            backCallback.</span><span style="color:#82AAFF;">remove</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div></li><li><p><code>@Composable</code> 不仅可以用来标记 <code>lambda</code> 或者无返回值的函数，还可以标记返回值为 <code>State</code> 的函数; 可以用来表示通用的值避免重复代码，如根据主题返回背景色，前景色</p></li><li><p><code>produceState</code> 启动一个协程返回 <code>@Composable State</code> 对象</p></li><li><p><code>derivedStateOf</code> 在一个方法体中转换一个或多个 <code>State</code></p></li><li><p>架构分层， 层级越低控制粒度越高，需要自己的实现越多</p><p><img src="https://developer.android.google.cn/images/jetpack/compose/layering-major-layers.svg" alt="level"></p><p>​</p></li><li><p>可以通过 <code>CompositionLocal</code> 在 Compose 作用域内提供隐式的值， <code>MaterialTheme</code> 提供了3个可以隐式实例： <code>LocalColors</code>、<code>LocalShapes</code> 和 <code>LocalTypography</code> 可以通过 colors、typography 和 shapes 访问；另外还有 <code>LocalContentAlpha</code> <code>LocalIndication</code> <code>LocalRippleTheme</code> <code>LocalTextSelectionColors</code> 另外可以在 Compose 中使用 <code>CompositionLocalProvider</code> 修改默认的值。</p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MaterialTheme</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    colors: </span><span style="color:#FFCB6B;">Colors</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> MaterialTheme.colors,</span></span>
<span class="line"><span style="color:#A6ACCD;">    typography: </span><span style="color:#FFCB6B;">Typography</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> MaterialTheme.typography,</span></span>
<span class="line"><span style="color:#A6ACCD;">    shapes: </span><span style="color:#FFCB6B;">Shapes</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> MaterialTheme.shapes,</span></span>
<span class="line"><span style="color:#A6ACCD;">    content: </span><span style="color:#FFCB6B;">@Composable</span><span style="color:#A6ACCD;"> () </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt; Unit</span></span>
<span class="line"><span style="color:#A6ACCD;">) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> rememberedColors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> {colors.</span><span style="color:#82AAFF;">copy</span><span style="color:#A6ACCD;">()}.</span><span style="color:#82AAFF;">apply</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">updateColorsFrom</span><span style="color:#A6ACCD;">(colors) }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> rippleIndication </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberRipple</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> selectionColors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberTextSelectionColors</span><span style="color:#A6ACCD;">(rememberedColors)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">CompositionLocalProvider</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalColors provides rememberedColors,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalContentAlpha provides ContentAlpha.high,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalIndication provides rippleIndication,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalRippleTheme provides MaterialRippleTheme,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalShapes provides shapes,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalTextSelectionColors provides selectionColors,</span></span>
<span class="line"><span style="color:#A6ACCD;">        LocalTypography provides typography</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">ProvideTextStyle</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> typography.body1, content </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> content)</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CompositionLocalExample</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">MaterialTheme</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;font-style:italic;">// MaterialTheme sets ContentAlpha.high as default</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">Column</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;Uses MaterialTheme&#39;s provided alpha&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">CompositionLocalProvider</span><span style="color:#A6ACCD;">(LocalContentAlpha provides ContentAlpha.medium) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;Medium value provided for LocalContentAlpha&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;This Text also uses the medium value&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">CompositionLocalProvider</span><span style="color:#A6ACCD;">(LocalContentAlpha provides ContentAlpha.disabled) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#82AAFF;">DescendantExample</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">                }</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div></li><li><p>布局</p><p><img src="https://developer.android.google.cn/images/jetpack/compose/layout-column-row-box.png" alt="layout"></p></li><li><p>修饰符：</p><ul><li>更改可组合项的大小、布局、行为和外观</li><li>添加信息，如无障碍标签</li><li>处理用户输入</li><li>添加高级互动，如使元素可点击、可滚动、可拖动或可缩放</li></ul><p>默认父组件会包裹子组件，也可通过 <code>size</code> 设置尺寸另外子组件可以通过 <code>requiredSize</code> 更改自身的限定尺寸(requiredSize 的优先级比 size高)，<code>fillMaxHeight</code> <code>fillMaxSize</code> 和 <code>fillMaxWidth</code> 用于填充父组件</p><p><code>paddingFromBaseline</code> 用于设置文本基线上方的内边距</p><p><code>offset</code> 修饰符用于修改组件基于0点的偏移量，可以x, y 轴，数值可负；并且不会影响组件的测量</p><p>在 <code>Box</code> 组件中使用 <code>matchParentSize</code> 将不会占居多余的空间来填充父组件， <code>fillMaxSize</code> 会通过填满父组件来</p><p>在 Row 和 Column 中可以使用 <code>weight</code> 设置权重</p></li><li><p>自定义布局：每个组件都有一个位置 (x,y) 和大小 (width,height) ，单遍测量</p></li><li><p>主题： 支持三个属性 <code>colors</code> <code>typography</code> <code>shapes</code></p><ul><li><p>color可以指定:<code> primary, primaryVariant, onPrimary, secondary, onSecondary, background, onBackground, surface, onSurface, error, onError</code></p></li><li><p>typography可以指定: <code> h1, h2, h3, h4, h5, h6, subtitle1, subtitle2, body1, body2, button, caption, overline</code></p></li><li><p>shape: 可以指定三种： <code>small，medium，large</code></p></li></ul></li><li><p>列表： <code>Row</code>, <code>Column</code>, <code>LazyColumn</code>, <code>LazyRow</code>, <code>LazyVerticalGrid</code></p><ul><li>在lazy* 的作用域中 使用<code>item</code>添加一个，<code>items(Int)</code>添加多个(有点像构造函数), 使用<code>stickHeader</code> 添加粘性头部</li></ul><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// TODO: This ideally would be done in the ViewModel</span></span>
<span class="line"><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> grouped </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> contacts.</span><span style="color:#82AAFF;">groupBy</span><span style="color:#A6ACCD;"> { it.firstName[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">] }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">@OptIn</span><span style="color:#A6ACCD;">(ExperimentalFoundationApi::</span><span style="color:#82AAFF;">class</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ContactsList</span><span style="color:#A6ACCD;">(grouped: </span><span style="color:#FFCB6B;">Map</span><span style="color:#A6ACCD;">&lt;</span><span style="color:#FFCB6B;">Char</span><span style="color:#A6ACCD;">, </span><span style="color:#FFCB6B;">List</span><span style="color:#A6ACCD;">&lt;</span><span style="color:#FFCB6B;">Contact</span><span style="color:#A6ACCD;">&gt;&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">LazyColumn</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        grouped.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;"> { (initial, contactsForInitial) </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">stickyHeader</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">CharacterHeader</span><span style="color:#A6ACCD;">(initial)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">items</span><span style="color:#A6ACCD;">(contactsForInitial) { contact </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">ContactListItem</span><span style="color:#A6ACCD;">(contact)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><ul><li>同过 <code>LazyListState</code> 可以查询列表的状态，并且控制列表滚动位置</li></ul><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MessageList</span><span style="color:#A6ACCD;">(messages: </span><span style="color:#FFCB6B;">List</span><span style="color:#A6ACCD;">&lt;</span><span style="color:#FFCB6B;">Message</span><span style="color:#A6ACCD;">&gt;) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> listState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberLazyListState</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// Remember a CoroutineScope to be able to launch</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> coroutineScope </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberCoroutineScope</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">LazyColumn</span><span style="color:#A6ACCD;">(state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> listState) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ScrollToTopButton</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        onClick </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            coroutineScope.</span><span style="color:#82AAFF;">launch</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">// Animate scroll to the first item</span></span>
<span class="line"><span style="color:#A6ACCD;">                listState.</span><span style="color:#82AAFF;">animateScrollToItem</span><span style="color:#A6ACCD;">(index </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><ul><li>通过设置 <code>itemKey</code> 避免重复渲染，不设置默认使用位置顺序作为 <code>key</code></li></ul></li><li><p>文字 <code>Text()</code>： 可以设置对其，颜色，字体，样式，可见行数，溢出样式；通过<code>buildAnnotatedString</code>可以设置多种样式的文本</p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">MultipleStylesInText</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">buildAnnotatedString</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">withStyle</span><span style="color:#A6ACCD;">(style </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpanStyle</span><span style="color:#A6ACCD;">(color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Color.Blue)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;H&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;ello &quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">withStyle</span><span style="color:#A6ACCD;">(style </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpanStyle</span><span style="color:#A6ACCD;">(fontWeight </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> FontWeight.Bold, color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Color.Red)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;W&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            }</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;orld&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><ul><li>互动： 使文字可选使用<code>SelectionContainer</code> 包裹，<code>DisableSelection</code> 使包裹内的文字不可选</li><li>点击注解： 在文本中添加注解，并获取注解内容</li></ul><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">AnnotatedClickableText</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> annotatedText </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">buildAnnotatedString</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;Click &quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// We attach this *URL* annotation to the following content</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">// until `pop()` is called</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">pushStringAnnotation</span><span style="color:#A6ACCD;">(tag </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;URL&quot;</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                             </span><span style="color:#C792EA;">annotation</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;https://developer.android.com&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">withStyle</span><span style="color:#A6ACCD;">(style </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SpanStyle</span><span style="color:#A6ACCD;">(color </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Color.Blue,</span></span>
<span class="line"><span style="color:#A6ACCD;">                                    fontWeight </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> FontWeight.Bold)) {</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">append</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;here&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">pop</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ClickableText</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        text </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> annotatedText,</span></span>
<span class="line"><span style="color:#A6ACCD;">        onClick </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { offset </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// We check if there is an *URL* annotation attached to the text</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// at the clicked position</span></span>
<span class="line"><span style="color:#A6ACCD;">            annotatedText.</span><span style="color:#82AAFF;">getStringAnnotations</span><span style="color:#A6ACCD;">(tag </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&quot;URL&quot;</span><span style="color:#A6ACCD;">, start </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> offset,</span></span>
<span class="line"><span style="color:#A6ACCD;">                                                    end </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> offset)</span></span>
<span class="line"><span style="color:#A6ACCD;">                .</span><span style="color:#82AAFF;">firstOrNull</span><span style="color:#A6ACCD;">()?.</span><span style="color:#82AAFF;">let</span><span style="color:#A6ACCD;"> { </span><span style="color:#C792EA;">annotation</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;">// If yes, we log its value</span></span>
<span class="line"><span style="color:#A6ACCD;">                    Log.</span><span style="color:#82AAFF;">d</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;Clicked URL&quot;</span><span style="color:#A6ACCD;">, </span><span style="color:#C792EA;">annotation</span><span style="color:#A6ACCD;">.item)</span></span>
<span class="line"><span style="color:#A6ACCD;">                }</span></span>
<span class="line"><span style="color:#A6ACCD;">        }</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><ul><li>输入框： <code>TextField</code>, <code>OutlinedTextField</code> 可以设置样式：<code>singleLine</code>, <code>maxLines</code>, <code>textStyle</code> 等，键盘选项： <code>capitalization</code>, <code>autoCorrect</code>, <code>keyboardType</code>, <code>imeAction</code>以及格式设置如将密码替换成<code>*</code></li></ul><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PasswordTextField</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> password </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberSaveable</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">mutableStateOf</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;&quot;</span><span style="color:#A6ACCD;">) }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">TextField</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> password,</span></span>
<span class="line"><span style="color:#A6ACCD;">        onValueChange </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { password </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> it },</span></span>
<span class="line"><span style="color:#A6ACCD;">        label </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span><span style="color:#C3E88D;">&quot;Enter password&quot;</span><span style="color:#A6ACCD;">) },</span></span>
<span class="line"><span style="color:#A6ACCD;">        visualTransformation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">PasswordVisualTransformation</span><span style="color:#A6ACCD;">(),</span></span>
<span class="line"><span style="color:#A6ACCD;">        keyboardOptions </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">KeyboardOptions</span><span style="color:#A6ACCD;">(keyboardType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> KeyboardType.Password)</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div></li><li><p>自定义图形： 使用 <code>Canvas</code> 构建其作用域提供一个size对象，可查询 <code>Canvas</code> 的宽高； <code>drawLine</code>, <code>drawCircle</code>, <code>drawRect</code>, <code>drawArc</code>, <code>drawImage</code>, <code>drawOval</code>, <code>drawPoints</code> , <code>drawRoundRect</code>, 控制: 边界<code>inset</code>， 旋转 <code>rotate</code> <code>rotateRad</code>, 缩放 <code>scale</code>, 移动 <code>translate</code>, 综合 <code>withTransform</code> ，裁剪 <code>clipPath</code>, <code>clipRect</code></p></li><li><p>动画: <code>AnimatedVisibility</code>, <code>AnimatedContent</code>, <code>animatedContentSize</code>, <code>Crossfade</code>； AnimationSpec： <code>spring</code>, <code>tween</code>, <code>keyframes</code>, <code>repeatable</code>, <code>infiniteRepeatable</code>, <code>snap</code></p></li><li><p>手势: 点按<code>clickable</code>, <code>pointerInput</code>, 滚动 <code>verticalScroll</code>, <code>horizontalScroll</code>, <code>scrollable</code>, <code>dragable</code>, <code>swipeable</code>, <code>transformable</code></p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Modifier.</span><span style="color:#82AAFF;">pointerInput</span><span style="color:#A6ACCD;">(Unit) {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">detectTapGestures</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        onPress </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;font-style:italic;">/* Called when the gesture starts */</span><span style="color:#A6ACCD;"> },</span></span>
<span class="line"><span style="color:#A6ACCD;">        onDoubleTap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;font-style:italic;">/* Called on Double Tap */</span><span style="color:#A6ACCD;"> },</span></span>
<span class="line"><span style="color:#A6ACCD;">        onLongPress </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;font-style:italic;">/* Called on Long Press */</span><span style="color:#A6ACCD;"> },</span></span>
<span class="line"><span style="color:#A6ACCD;">        onTap </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { </span><span style="color:#676E95;font-style:italic;">/* Called on Tap */</span><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ScrollableSample</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// actual composable state</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> offset </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">mutableStateOf</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0f</span><span style="color:#A6ACCD;">) }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Box</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        Modifier</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">size</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">150</span><span style="color:#A6ACCD;">.dp)</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">scrollable</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                orientation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Orientation.Vertical,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">// Scrollable state: describes how to consume</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">// scrolling delta and update offset</span></span>
<span class="line"><span style="color:#A6ACCD;">                state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberScrollableState</span><span style="color:#A6ACCD;"> { delta </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    offset </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> delta</span></span>
<span class="line"><span style="color:#A6ACCD;">                    delta</span></span>
<span class="line"><span style="color:#A6ACCD;">                }</span></span>
<span class="line"><span style="color:#A6ACCD;">            )</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">background</span><span style="color:#A6ACCD;">(Color.LightGray),</span></span>
<span class="line"><span style="color:#A6ACCD;">        contentAlignment </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Alignment.Center</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(offset.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p><img src="https://developer.android.google.cn/images/jetpack/compose/gestures-numeric-offset.gif" alt="一种用于检测手指按下手势并显示手指位置数值的界面元素"></p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SwipeableSample</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> width </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">96</span><span style="color:#A6ACCD;">.dp</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> squareSize </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;">.dp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> swipeableState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberSwipeableState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> sizePx </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">with</span><span style="color:#A6ACCD;">(LocalDensity.current) { squareSize.</span><span style="color:#82AAFF;">toPx</span><span style="color:#A6ACCD;">() }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> anchors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mapOf</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0f</span><span style="color:#A6ACCD;"> to </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">, sizePx to </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;font-style:italic;">// Maps anchor points (in px) to states</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Box</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        modifier </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Modifier</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">width</span><span style="color:#A6ACCD;">(width)</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">swipeable</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> swipeableState,</span></span>
<span class="line"><span style="color:#A6ACCD;">                anchors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> anchors,</span></span>
<span class="line"><span style="color:#A6ACCD;">                thresholds </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> { _, _ </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt; </span><span style="color:#82AAFF;">FractionalThreshold</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.3f</span><span style="color:#A6ACCD;">) },</span></span>
<span class="line"><span style="color:#A6ACCD;">                orientation </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Orientation.Horizontal</span></span>
<span class="line"><span style="color:#A6ACCD;">            )</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">background</span><span style="color:#A6ACCD;">(Color.LightGray)</span></span>
<span class="line"><span style="color:#A6ACCD;">    ) {</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">Box</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">            Modifier</span></span>
<span class="line"><span style="color:#A6ACCD;">                .</span><span style="color:#82AAFF;">offset</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">IntOffset</span><span style="color:#A6ACCD;">(swipeableState.offset.</span><span style="color:#C792EA;">value</span><span style="color:#A6ACCD;">.</span><span style="color:#82AAFF;">roundToInt</span><span style="color:#A6ACCD;">(), </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">) }</span></span>
<span class="line"><span style="color:#A6ACCD;">                .</span><span style="color:#82AAFF;">size</span><span style="color:#A6ACCD;">(squareSize)</span></span>
<span class="line"><span style="color:#A6ACCD;">                .</span><span style="color:#82AAFF;">background</span><span style="color:#A6ACCD;">(Color.DarkGray)</span></span>
<span class="line"><span style="color:#A6ACCD;">        )</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p><img src="https://developer.android.google.cn/images/jetpack/compose/gestures-swipe.gif" alt="响应滑动手势的界面元素"></p><div class="language-kotlin"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">@Composable</span></span>
<span class="line"><span style="color:#C792EA;">fun</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TransformableSample</span><span style="color:#A6ACCD;">() {</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">// set up all transformation states</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> scale </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">mutableStateOf</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1f</span><span style="color:#A6ACCD;">) }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> rotation </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">mutableStateOf</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0f</span><span style="color:#A6ACCD;">) }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> offset </span><span style="color:#C792EA;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">remember</span><span style="color:#A6ACCD;"> { </span><span style="color:#82AAFF;">mutableStateOf</span><span style="color:#A6ACCD;">(Offset.Zero) }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">val</span><span style="color:#A6ACCD;"> state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">rememberTransformableState</span><span style="color:#A6ACCD;"> { zoomChange, offsetChange, rotationChange </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        scale </span><span style="color:#89DDFF;">*=</span><span style="color:#A6ACCD;"> zoomChange</span></span>
<span class="line"><span style="color:#A6ACCD;">        rotation </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> rotationChange</span></span>
<span class="line"><span style="color:#A6ACCD;">        offset </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> offsetChange</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">Box</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">        Modifier</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// apply other transformations like rotation and zoom</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// on the pizza slice emoji</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">graphicsLayer</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                scaleX </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> scale,</span></span>
<span class="line"><span style="color:#A6ACCD;">                scaleY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> scale,</span></span>
<span class="line"><span style="color:#A6ACCD;">                rotationZ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rotation,</span></span>
<span class="line"><span style="color:#A6ACCD;">                translationX </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> offset.x,</span></span>
<span class="line"><span style="color:#A6ACCD;">                translationY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> offset.y</span></span>
<span class="line"><span style="color:#A6ACCD;">            )</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// add transformable to listen to multitouch transformation events</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">// after offset</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">transformable</span><span style="color:#A6ACCD;">(state </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> state)</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">background</span><span style="color:#A6ACCD;">(Color.Blue)</span></span>
<span class="line"><span style="color:#A6ACCD;">            .</span><span style="color:#82AAFF;">fillMaxSize</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p><img src="https://developer.android.google.cn/images/jetpack/compose/gestures-multitouch.gif" alt="响应多点触控手势（平移、缩放和旋转）的界面元素"></p></li><li><p>已知的库</p><ol><li>图片加载<a href="https://coil-kt.github.io/coil/compose/" target="_blank" rel="noreferrer">Cil 库</a></li><li>导航 Navigation</li></ol></li><li><p>获取资源文件中的内容： <code>stringResource</code>， <code>dimensionResource</code>， <code>colorResource</code>， <code>painterResource</code>， <code>animatedVectorResource</code></p></li></ol></div></div></main><footer class="VPDocFooter" data-v-a3c25e27 data-v-5774f702><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div><div class="site-footer"> MIT Licensed | Copyright © 2021-2022 <a class="vitepress" href="https://github.com/ggggxiaolong">谈小龙</a><br> Powered by <a class="vitepress" target="_blank" href="//vitepress.vuejs.org/">VitePress - 1.0.0-beta.6</a> Theme by <a class="vitepress" target="_blank" href="//github.com/airene/vitepress-blog-pure">Vitepress-blog</a></div><!--]--></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"page_4.md\":\"2a8257b7\",\"pages_demo.md\":\"106e69ab\",\"pages_archives.md\":\"cfb075cf\",\"page_2.md\":\"c5e96711\",\"posts_2016-05-31-okhttp_calls.md\":\"cc0d7f77\",\"page_5.md\":\"2768eb37\",\"posts_2016-03-25-安卓的注解支持.md\":\"f45f3992\",\"index.md\":\"241f2d98\",\"pages_tags.md\":\"5c3db299\",\"posts_2016-06-08-autovalue_with_builders.md\":\"977279e4\",\"posts_2018-03-12-flutter_开始_配置ide.md\":\"644e3eae\",\"posts_2016-06-02-okhttp_interceptors.md\":\"5e754373\",\"posts_2021-05-11-解决gd32vf103通过dfu下载问题.md\":\"68b15457\",\"posts_2023-05-15-jtag调试.md\":\"24e38045\",\"posts_2017-08-11-使用rebase修改git的提交顺序和并提交.md\":\"e8bdb4d3\",\"posts_2023-02-03-建模基本篇.md\":\"b5820274\",\"posts_2016-08-17-dagger2是如何保证@singleten单例的.md\":\"6638f96d\",\"posts_2016-06-06-autovalue_index.md\":\"34eeefdc\",\"posts_2023-05-12-freertos总结.md\":\"b3e04a9d\",\"posts_2018-03-12-flutter_开始_安装.md\":\"e618a51e\",\"posts_2016-06-07-autovalue_how_do_i_buider.md\":\"51c8550f\",\"pages_about.md\":\"98b05c64\",\"page_3.md\":\"04d3076b\",\"posts_2018-02-13-在react中使用fortawesome.md\":\"e2fdaa25\",\"posts_2017-03-14-sqlbrite官翻.md\":\"64e9e1ab\",\"posts_2019-05-23-motionlayout介绍_parti.md\":\"08fc6b73\",\"page_6.md\":\"e1418728\",\"posts_2023-01-30-blender快捷键.md\":\"efbb1179\",\"posts_2023-05-06-esp32idf配置.md\":\"6207913c\",\"posts_2018-11-22-kotlinx.serialization.md\":\"d4629804\",\"posts_2016-06-12-autovalue_how_do_i....md\":\"dafa27ed\",\"posts_2023-03-21-blender-m3工具使用.md\":\"2b8fa861\",\"posts_2023-02-01-2_吸附和衰减.md\":\"c973d94e\",\"posts_2023-05-17-esp32wifi.md\":\"ba74fc9d\",\"posts_2016-06-03-okhttp_https.md\":\"5d51651a\",\"posts_2023-04-23-tauri-threejs-error.md\":\"02751ee9\",\"posts_2022-01-09-tauri的pc应用.md\":\"ed300f7f\",\"posts_2016-06-01-okhttp_connections.md\":\"cd7be0ad\",\"posts_2023-07-27-wsl-docker部署gralog.md\":\"dff52bb4\",\"posts_2016-06-02-okhttp_recipes.md\":\"e71368bb\",\"posts_2021-08-25-android compose 笔记.md\":\"95a9e339\",\"posts_2021-01-31-rust运行stm32_blink.md\":\"a6651afe\",\"posts_2016-04-27-解决ubuntu升级遇到的问题.md\":\"f3e3b7a1\",\"posts_2023-01-31-1_坐标轴原点轴心.md\":\"bca27bc1\",\"posts_2016-08-11-合理的使用http_cache.md\":\"ee928329\",\"posts_2018-11-19-retorfit-coroutines-异常引发的崩溃.md\":\"6f90f12f\",\"posts_2019-03-19-dart和java的区别.md\":\"e0477541\",\"posts_2019-05-27-motionlayout_介绍_part3.md\":\"b28549f6\",\"posts_2021-02-04-基于vuepress搭建个人博客.md\":\"16e95da8\",\"posts_2019-05-25-motionlayout_介绍_part2.md\":\"7b8a88bc\",\"posts_2017-08-23-数据绑定.md\":\"f9265506\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"谈小龙\",\"description\":\"vitepress,blog,blog-theme\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"posts\":[{\"frontMatter\":{\"title\":\"WSL Docker 部署 Graylog\",\"date\":\"2023-07-27\",\"categories\":[\"Docker\"],\"tags\":[\"graylog\"]},\"regularPath\":\"/posts/2023-07-27-WSL-Docker部署gralog.html\"},{\"frontMatter\":{\"title\":\"ESP32 WiFi\",\"date\":\"2023-05-17\",\"categories\":[\"WiFi\"],\"tags\":[\"esp32c3\",\"wifi\"]},\"regularPath\":\"/posts/2023-05-17-ESP32Wifi.html\"},{\"frontMatter\":{\"title\":\"JTAG 调试\",\"date\":\"2023-05-15\",\"categories\":[\"openocd\",\"gdb\"],\"tags\":[\"jtag\",\"esp32c3\"]},\"regularPath\":\"/posts/2023-05-15-JTAG调试.html\"},{\"frontMatter\":{\"title\":\"FreeRTOS 总结\",\"date\":\"2023-05-12\",\"categories\":[\"FreeRTOS\"],\"tags\":[\"FreeRTOS\"]},\"regularPath\":\"/posts/2023-05-12-FreeRTOS总结.html\"},{\"frontMatter\":{\"title\":\"Esp32 IDF 配置\",\"date\":\"2023-05-06\",\"categories\":[\"Esp32 IDF\"],\"tags\":[\"Esp32-IDF\",\"esp32c3\"]},\"regularPath\":\"/posts/2023-05-06-Esp32IDF配置.html\"},{\"frontMatter\":{\"title\":\"Tauri运行three.js报错\",\"date\":\"2023-04-23\",\"categories\":[\"Tauri\"],\"tags\":[\"Tauri\"]},\"regularPath\":\"/posts/2023-04-23-tauri-threejs-error.html\"},{\"frontMatter\":{\"title\":\"Blender M3工具使用\",\"date\":\"2023-03-21\",\"categories\":[\"Blender\"],\"tags\":[\"Blender\"]},\"regularPath\":\"/posts/2023-03-21-Blender-M3工具使用.html\"},{\"frontMatter\":{\"title\":\"Blender 建模基本篇\",\"date\":\"2023-02-03\",\"categories\":[\"Blender\"],\"tags\":[\"Blender\"]},\"regularPath\":\"/posts/2023-02-03-建模基本篇.html\"},{\"frontMatter\":{\"title\":\"Blender 吸附和衰减\",\"date\":\"2023-01-31\",\"categories\":[\"Blender\"],\"tags\":[\"Blender\"]},\"regularPath\":\"/posts/2023-02-01-2_吸附和衰减.html\"},{\"frontMatter\":{\"title\":\"Blender 坐标轴|原点|轴心\",\"date\":\"2023-01-31\",\"categories\":[\"Blender\"],\"tags\":[\"Blender\"]},\"regularPath\":\"/posts/2023-01-31-1_坐标轴原点轴心.html\"},{\"frontMatter\":{\"title\":\"Blender 快捷键及设置\",\"date\":\"2023-01-30\",\"categories\":[\"Blender\"],\"tags\":[\"Blender\"]},\"regularPath\":\"/posts/2023-01-30-blender快捷键.html\"},{\"frontMatter\":{\"title\":\"Tauri PC 应用\",\"date\":\"2023-01-09\",\"categories\":[\"Tauri\"],\"tags\":[\"Tauri\"]},\"regularPath\":\"/posts/2022-01-09-Tauri的PC应用.html\"},{\"frontMatter\":{\"title\":\"Android Compose 笔记\",\"date\":\"2021-08-25\",\"categories\":[\"Android\"],\"tags\":[\"Android Compose\"]},\"regularPath\":\"/posts/2021-08-25-Android Compose 笔记.html\"},{\"frontMatter\":{\"title\":\"解决GD32vf103通过DFU下载问题\",\"date\":\"2021-05-11\",\"categories\":[\"riscv\"],\"tags\":[\"riscv\",\"GD32vf103cbt6\",\"Sipeed Longan Nano\"]},\"regularPath\":\"/posts/2021-05-11-解决GD32vf103通过DFU下载问题.html\"},{\"frontMatter\":{\"title\":\"基于VuePress部署自己的个人博客\",\"date\":\"2021-02-04\",\"categories\":[\"其他\"],\"tags\":[\"其他\"]},\"regularPath\":\"/posts/2021-02-04-基于VuePress搭建个人博客.html\"},{\"frontMatter\":{\"title\":\"Rust运行Stm32 Blink\",\"date\":\"2021-01-31\",\"categories\":[\"Rust\"],\"tags\":[\"Stm32\",\"Stm32F103C8T6\"]},\"regularPath\":\"/posts/2021-01-31-Rust运行Stm32_Blink.html\"},{\"frontMatter\":{\"title\":\"MotionLayout 介绍 Part3\",\"date\":\"2019-05-27\",\"categories\":[\"Android\"],\"tags\":[\"MotionLayout\"]},\"regularPath\":\"/posts/2019-05-27-MotionLayout_介绍_Part3.html\"},{\"frontMatter\":{\"title\":\"MotionLayout_介绍_Part2\",\"date\":\"2019-05-25\",\"categories\":[\"Android\"],\"tags\":[\"MotionLayout\"]},\"regularPath\":\"/posts/2019-05-25-MotionLayout_介绍_Part2.html\"},{\"frontMatter\":{\"title\":\"MotionLayout介绍 part1\",\"date\":\"2019-05-23\",\"categories\":[\"Android\"],\"tags\":[\"MotionLayout\"]},\"regularPath\":\"/posts/2019-05-23-MotionLayout介绍_partI.html\"},{\"frontMatter\":{\"title\":\"Dart和Java的区别\",\"date\":\"2019-03-19\",\"categories\":[\"Flutter\"],\"tags\":[\"Dart\"]},\"regularPath\":\"/posts/2019-03-19-Dart和Java的区别.html\"},{\"frontMatter\":{\"title\":\"kotlinx.serialization\",\"date\":\"2018-11-22\",\"categories\":[\"Kotlin\"],\"tags\":[\"Serialization\"]},\"regularPath\":\"/posts/2018-11-22-kotlinx.serialization.html\"},{\"frontMatter\":{\"title\":\"Retorfit Coroutines 异常引发的崩溃\",\"date\":\"2018-11-19\",\"categories\":[\"Android\"],\"tags\":[\"Retorfit\",\"Coroutines\"]},\"regularPath\":\"/posts/2018-11-19-retorfit-coroutines-异常引发的崩溃.html\"},{\"frontMatter\":{\"title\":\"Flutter 开始 配置IDE\",\"date\":\"2018-03-12\",\"categories\":[\"Flutter\"],\"tags\":[\"Flutter\"]},\"regularPath\":\"/posts/2018-03-12-Flutter_开始_配置IDE.html\"},{\"frontMatter\":{\"title\":\"Flutter 开始 安装\",\"date\":\"2018-03-12\",\"categories\":[\"Flutter\"],\"tags\":[\"Flutter\"]},\"regularPath\":\"/posts/2018-03-12-Flutter_开始_安装.html\"},{\"frontMatter\":{\"title\":\"在React中使用Fortawesome\",\"date\":\"2018-02-13\",\"categories\":[\"React\"],\"tags\":[\"库\"]},\"regularPath\":\"/posts/2018-02-13-在React中使用fortawesome.html\"},{\"frontMatter\":{\"title\":\"Android数据绑定\",\"date\":\"2017-08-23\",\"categories\":[\"Android\"],\"tags\":[\"DataBinding\"]},\"regularPath\":\"/posts/2017-08-23-数据绑定.html\"},{\"frontMatter\":{\"title\":\"使用rebase修改Git的提交顺序和并提交\",\"date\":\"2017-08-11\",\"categories\":[\"Git\"],\"tags\":[\"Rebase\"]},\"regularPath\":\"/posts/2017-08-11-使用rebase修改Git的提交顺序和并提交.html\"},{\"frontMatter\":{\"title\":\"SQLBrite\",\"date\":\"2017-03-14\",\"categories\":[\"Android\"],\"tags\":[\"SQLBrite\"]},\"regularPath\":\"/posts/2017-03-14-SQLBrite官翻.html\"},{\"frontMatter\":{\"title\":\"Dagger2 是如何保证单例的\",\"date\":\"2016-08-17\",\"categories\":[\"Android\"],\"tags\":[\"Dagger2\"]},\"regularPath\":\"/posts/2016-08-17-Dagger2是如何保证@singleten单例的.html\"},{\"frontMatter\":{\"title\":\"合理的使用Http Cache\",\"date\":\"2016-08-11\",\"categories\":[\"Android\"],\"tags\":[\"Http\"]},\"regularPath\":\"/posts/2016-08-11-合理的使用Http_Cache.html\"},{\"frontMatter\":{\"title\":\"AutoValue How do I ...\",\"date\":\"2016-06-12\",\"categories\":[\"Android\"],\"tags\":[\"AutoValue\"]},\"regularPath\":\"/posts/2016-06-12-AutoValue_How_do_I....html\"},{\"frontMatter\":{\"title\":\"AutoValue With Builder\",\"date\":\"2016-06-08\",\"categories\":[\"Android\"],\"tags\":[\"AutoValue\"]},\"regularPath\":\"/posts/2016-06-08-AutoValue_with_Builders.html\"},{\"frontMatter\":{\"title\":\"AutoValue How do I ... (Builder)\",\"date\":\"2016-06-07\",\"categories\":[\"Android\"],\"tags\":[\"AutoValue\"]},\"regularPath\":\"/posts/2016-06-07-AutoValue_How_do_I_Buider.html\"},{\"frontMatter\":{\"title\":\"AutoValue Index\",\"date\":\"2016-06-06\",\"categories\":[\"Android\"],\"tags\":[\"AutoValue\"]},\"regularPath\":\"/posts/2016-06-06-AutoValue_Index.html\"},{\"frontMatter\":{\"title\":\"Okhttp HTTPS\",\"date\":\"2016-06-03\",\"categories\":[\"Android\"],\"tags\":[\"Okhttp\"]},\"regularPath\":\"/posts/2016-06-03-Okhttp_HTTPS.html\"},{\"frontMatter\":{\"title\":\"Okhttp Recipes\",\"date\":\"2016-06-02\",\"categories\":[\"Android\"],\"tags\":[\"Okhttp\"]},\"regularPath\":\"/posts/2016-06-02-Okhttp_Recipes.html\"},{\"frontMatter\":{\"title\":\"Okhttp Interceptions\",\"date\":\"2016-06-02\",\"categories\":[\"Android\"],\"tags\":[\"Okhttp\"]},\"regularPath\":\"/posts/2016-06-02-Okhttp_Interceptors.html\"},{\"frontMatter\":{\"title\":\"Okhttp Connections\",\"date\":\"2016-06-01\",\"categories\":[\"Android\"],\"tags\":[\"Okhttp\"]},\"regularPath\":\"/posts/2016-06-01-Okhttp_Connections.html\"},{\"frontMatter\":{\"title\":\"Okhttp Calls\",\"date\":\"2016-05-31\",\"categories\":[\"Android\"],\"tags\":[\"Okhttp\"]},\"regularPath\":\"/posts/2016-05-31-Okhttp_Calls.html\"},{\"frontMatter\":{\"title\":\"解决Ubuntu升级遇到的问题\",\"date\":\"2016-04-27\",\"categories\":[\"Ubuntu\"],\"tags\":[\"Ubuntu\"]},\"regularPath\":\"/posts/2016-04-27-解决Ubuntu升级遇到的问题.html\"},{\"frontMatter\":{\"title\":\"安卓的注解支持\",\"date\":\"2016-03-25\",\"sidebar\":\"auto\",\"categories\":[\"Android\"],\"tags\":[\"注解\"],\"publish\":true},\"regularPath\":\"/posts/2016-03-25-安卓的注解支持.html\"}],\"website\":\"https://github.com/ggggxiaolong\",\"comment\":{\"repo\":\"ggggxiaolong/ggggxiaolong.github.io\",\"themes\":\"github-light\",\"issueTerm\":\"pathname\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Archives\",\"link\":\"/pages/archives\"},{\"text\":\"Tags\",\"link\":\"/pages/tags\"},{\"text\":\"About\",\"link\":\"/pages/about\"},{\"text\":\"Demo\",\"link\":\"/pages/demo\"}],\"outlineTitle\":\"文章摘要\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ggggxiaolong\"}]},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>